import{r as h,j as e,b as A,a as F,u as R,H as P,L as b}from"./app-C8shHsPf.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=(u,l,n,s)=>{const a=h.forwardRef(({color:o="currentColor",size:v=24,stroke:m=2,title:g,className:d,children:t,...r},k)=>h.createElement("svg",{ref:k,...B[u],width:v,height:v,className:["tabler-icon",`tabler-icon-${l}`,d].join(" "),strokeWidth:m,stroke:o,...r},[g&&h.createElement("title",{key:"svg-title"},g),...s.map(([c,x])=>h.createElement(c,x)),...Array.isArray(t)?t:[t]]));return a.displayName=`${n}`,a};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],G=i("outline","alert-triangle","AlertTriangle",V);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]],O=i("outline","chart-bar","ChartBar",H);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],q=i("outline","check","Check",X);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 12l.01 0",key:"svg-2"}],["path",{d:"M13 12l2 0",key:"svg-3"}],["path",{d:"M9 16l.01 0",key:"svg-4"}],["path",{d:"M13 16l2 0",key:"svg-5"}]],K=i("outline","clipboard-list","ClipboardList",J);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]],Y=i("outline","dashboard","Dashboard",Q);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]],S=i("outline","database","Database",Z);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]],se=i("outline","edit","Edit",ee);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]],te=i("outline","file-text","FileText",ae);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],L=i("outline","info-circle","InfoCircle",ne);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]],re=i("outline","lock","Lock",oe);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]],ie=i("outline","logout","Logout",ce);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M7 8l0 .01",key:"svg-2"}],["path",{d:"M7 16l0 .01",key:"svg-3"}]],de=i("outline","server","Server",le);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],me=i("outline","settings","Settings",he);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3",key:"svg-0"}]],ve=i("outline","shield","Shield",ue);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]],pe=i("outline","user","User",ge);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1",key:"svg-1"}],["path",{d:"M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}],["path",{d:"M17 10h2a2 2 0 0 1 2 2v1",key:"svg-3"}],["path",{d:"M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-4"}],["path",{d:"M3 13v-1a2 2 0 0 1 2 -2h2",key:"svg-5"}]],ke=i("outline","users-group","UsersGroup",xe);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],fe=i("outline","users","Users",ye);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]],T=i("outline","x","X",be),Ne=({id:u,type:l="success",title:n,message:s,duration:a=5e3,onClose:o})=>{const[v,m]=h.useState(!0),[g,d]=h.useState(!1);h.useEffect(()=>{if(a>0){const c=setTimeout(()=>{t()},a);return()=>clearTimeout(c)}},[a]);const t=()=>{d(!0),setTimeout(()=>{m(!1),o(u)},300)};if(!v)return null;const r=()=>{const c="relative flex items-start p-4 mb-3 rounded-lg shadow-lg border-l-4 transition-all duration-300 ease-in-out transform",x=g?"opacity-0 translate-x-full":"opacity-100 translate-x-0";switch(l){case"success":return`${c} ${x} bg-green-50 border-green-400 text-green-800`;case"error":return`${c} ${x} bg-red-50 border-red-400 text-red-800`;case"warning":return`${c} ${x} bg-yellow-50 border-yellow-400 text-yellow-800`;case"info":return`${c} ${x} bg-blue-50 border-blue-400 text-blue-800`;default:return`${c} ${x} bg-gray-50 border-gray-400 text-gray-800`}},k=()=>{const c="flex-shrink-0 w-5 h-5 mt-0.5";switch(l){case"success":return e.jsx(q,{className:`${c} text-green-500`});case"error":return e.jsx(T,{className:`${c} text-red-500`});case"warning":return e.jsx(G,{className:`${c} text-yellow-500`});case"info":return e.jsx(L,{className:`${c} text-blue-500`});default:return e.jsx(L,{className:`${c} text-gray-500`})}};return e.jsx("div",{className:r(),children:e.jsxs("div",{className:"flex",children:[k(),e.jsxs("div",{className:"ml-3 flex-1",children:[n&&e.jsx("h4",{className:"text-sm font-medium mb-1",children:n}),e.jsx("p",{className:"text-sm",children:s})]}),e.jsx("button",{onClick:t,className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:e.jsx(T,{className:"w-4 h-4"})})]})})},je=({toasts:u,onRemoveToast:l})=>e.jsx("div",{className:"fixed top-4 right-4 z-50 w-96 max-w-sm",children:u.map(n=>e.jsx(Ne,{...n,onClose:l},n.id))}),we=()=>{const[u,l]=h.useState([]),n=h.useCallback(d=>{const t=Date.now()+Math.random(),r={id:t,type:"success",duration:5e3,...d};return l(k=>[...k,r]),t},[]),s=h.useCallback(d=>{l(t=>t.filter(r=>r.id!==d))},[]),a=h.useCallback((d,t="Success",r={})=>n({type:"success",title:t,message:d,...r}),[n]),o=h.useCallback((d,t="Error",r={})=>n({type:"error",title:t,message:d,duration:7e3,...r}),[n]),v=h.useCallback((d,t="Warning",r={})=>n({type:"warning",title:t,message:d,duration:6e3,...r}),[n]),m=h.useCallback((d,t="Info",r={})=>n({type:"info",title:t,message:d,...r}),[n]),g=h.useCallback(()=>{l([])},[]);return{toasts:u,addToast:n,removeToast:s,showSuccess:a,showError:o,showWarning:v,showInfo:m,clearAll:g}},Me=({onSuccess:u,onError:l,className:n="",children:s})=>{const a=o=>{o.preventDefault();const v=A();if(!v){console.error("CSRF token not found"),l&&l("CSRF token not found");return}const m=new FormData;m.append("_token",v),F.post("/logout",m,{onSuccess:()=>{u&&u()},onError:g=>{console.error("Logout error:",g),l&&l(g)},onFinish:()=>{}})};return e.jsx("form",{onSubmit:a,className:n,children:s})};function Ce({children:u,title:l}){var j,w,M,_,C,$;const n=R(),{auth:s,flash:a}=n.props,o=n.url||window.location.pathname,[v,m]=h.useState(!1),{toasts:g,removeToast:d,showSuccess:t,showError:r}=we(),k=p=>{var y,f;return(f=(y=s==null?void 0:s.user)==null?void 0:y.roles)==null?void 0:f.some(N=>N.name===p)},c=p=>{var y,f;return(f=(y=s==null?void 0:s.user)==null?void 0:y.roles)==null?void 0:f.some(N=>{var I;return(I=N.permissions)==null?void 0:I.some(U=>U.name===p)})};h.useEffect(()=>{a!=null&&a.success&&t(a.success),a!=null&&a.error&&r(a.error)},[a,t,r]);const x=()=>{t("Logged out successfully"),m(!1)},z=p=>{console.error("Logout error:",p),r("Failed to logout. Please try again."),m(!1)},W=[{name:"Dashboard",href:"/",icon:Y,current:o==="/"},{name:"Products",href:"/products",icon:S,current:o.startsWith("/products")},{name:"Customers",href:"/customers",icon:fe,current:o.startsWith("/customers")},{name:"Dashboards",href:"/dashboards",icon:O,current:o.startsWith("/dashboards")},{name:"Formulas",href:"/formulas",icon:me,current:o.startsWith("/formulas")},{name:"Data Ingestion",href:"/data-ingestion",icon:S,current:o.startsWith("/data-ingestion")}],D=[{name:"User Management",href:"/admin/users",icon:ke,current:o.startsWith("/admin/users")},{name:"Audit Trail",href:"/admin/audit-trail",icon:K,current:o.startsWith("/admin/audit-trail")},{name:"Role Management",href:"/admin/roles",icon:ve,current:o.startsWith("/admin/roles")},{name:"System Settings",href:"/admin/settings",icon:de,current:o.startsWith("/admin/settings")},{name:"System Logs",href:"/admin/logs",icon:te,current:o.startsWith("/admin/logs")}],E=[...W,...k("Admin")||c("manage-users")||c("view-audit-trail")?D:[]];return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:l}),e.jsxs("div",{className:"page",style:{backgroundColor:"#000000",margin:0,padding:0},children:[e.jsx("header",{className:"navbar navbar-expand-md navbar-light d-print-none w-100","data-bs-theme":"dark",style:{backgroundColor:"#1f2937",width:"100vw",margin:0,padding:0},children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbar-menu",children:e.jsx("span",{className:"navbar-toggler-icon"})}),e.jsx("div",{className:"collapse navbar-collapse",id:"navbar-menu",children:e.jsx("div",{className:"d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center",children:e.jsx("ul",{className:"navbar-nav",children:E.map(p=>{const y=p.icon;return e.jsx("li",{className:"nav-item",children:e.jsxs(b,{href:p.href,className:`nav-link ${p.current?"active":""}`,children:[e.jsx("span",{className:"nav-link-icon d-md-none d-lg-inline-block",children:e.jsx(y,{size:24})}),e.jsx("span",{className:"nav-link-title",children:p.name})]})},p.name)})})})}),e.jsx("div",{className:"navbar-nav flex-row order-md-last",children:e.jsxs("div",{className:"nav-item dropdown position-relative",children:[e.jsxs("button",{className:"nav-link d-flex lh-1 text-reset p-2 btn btn-link",onClick:()=>m(!v),style:{minWidth:"fit-content"},children:[e.jsx("span",{className:"avatar avatar-sm bg-primary text-white",children:((w=(j=s==null?void 0:s.user)==null?void 0:j.name)==null?void 0:w.charAt(0))||"U"}),e.jsxs("div",{className:"d-none d-lg-block ps-2",style:{whiteSpace:"nowrap"},children:[e.jsx("div",{className:"text-white",children:((M=s==null?void 0:s.user)==null?void 0:M.name)||"User"}),e.jsx("div",{className:"mt-1 small text-muted",children:((_=s==null?void 0:s.user)==null?void 0:_.email)||"user@example.com"})]})]}),v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{zIndex:1040},onClick:()=>m(!1)}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-end dropdown-menu-arrow show position-absolute",style:{zIndex:1050,right:0,top:"100%"},children:[e.jsxs("div",{className:"dropdown-header",children:[e.jsx("strong",{children:((C=s==null?void 0:s.user)==null?void 0:C.name)||"User"}),e.jsx("div",{className:"text-muted small",children:(($=s==null?void 0:s.user)==null?void 0:$.email)||"user@example.com"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs(b,{href:"/profile",className:"dropdown-item",onClick:()=>m(!1),children:[e.jsx(pe,{size:16,className:"me-2"}),"View Profile"]}),e.jsxs(b,{href:"/profile/edit",className:"dropdown-item",onClick:()=>m(!1),children:[e.jsx(se,{size:16,className:"me-2"}),"Edit Profile"]}),e.jsxs(b,{href:"/profile/edit#password",className:"dropdown-item",onClick:()=>m(!1),children:[e.jsx(re,{size:16,className:"me-2"}),"Change Password"]}),e.jsx("div",{className:"dropdown-divider"}),e.jsx(Me,{onSuccess:x,onError:z,className:"d-block",children:e.jsxs("button",{type:"submit",className:"dropdown-item text-danger w-100 text-start",children:[e.jsx(ie,{size:16,className:"me-2"}),"Logout"]})})]})]})]})})]})}),e.jsxs("main",{className:"main-content",children:[(a==null?void 0:a.message)&&e.jsx("div",{className:"container-fluid px-4 pt-3",children:e.jsxs("div",{className:"alert alert-success alert-dismissible",role:"alert",children:[e.jsx("div",{className:"d-flex",children:e.jsx("div",{children:a.message})}),e.jsx("a",{className:"btn-close","data-bs-dismiss":"alert"})]})}),(a==null?void 0:a.error)&&e.jsx("div",{className:"container-fluid px-4 pt-3",children:e.jsxs("div",{className:"alert alert-danger alert-dismissible",role:"alert",children:[e.jsx("div",{className:"d-flex",children:e.jsx("div",{children:a.error})}),e.jsx("a",{className:"btn-close","data-bs-dismiss":"alert"})]})}),u]})]}),e.jsx(je,{toasts:g,onRemoveToast:d})]})}export{Ce as A,K as I,pe as a,S as b,se as c,ve as d,fe as e,q as f,te as g,i as h,me as i,de as j,L as k,G as l,O as m,Y as n,T as o,re as p,we as u};
